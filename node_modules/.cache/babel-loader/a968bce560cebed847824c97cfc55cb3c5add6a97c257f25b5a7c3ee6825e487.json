{"ast":null,"code":"import React from\"react\";import{useMachine}from\"@xstate/react\";import{assign,fromPromise,setup,fromObservable}from\"xstate\";import{percentage,minutes,seconds}from\"./utils\";import{Logger,ConsoleLogger}from'react-console-logger';import{interval}from\"rxjs\";import\"./reset.css\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const pino=require(\"pino\");const logger=pino({transport:{target:\"pino-pretty\"}});logger.info('Hello World');const myLogger=new Logger();/**\n * Video State Machine\n */const videoMachine=setup({types:{},actions:{setVideo:assign({video:_ref=>{let{event}=_ref;return event.video;},duration:_ref2=>{let{event}=_ref2;return event.video.duration;}}),iniciaObservador:_ref3=>{let{context,_event}=_ref3;if(context.observa==null){context.observa=interval(1000);context.suscrito=context.observa.subscribe(snapshot=>{console.log('MiNuevoEstado',context);});//context.suscrito.start();\n}},paraObservador:assign({duration:_ref4=>{let{context,_event}=_ref4;return context.video.currentTime;}}),activaObservador:_ref5=>{let{context,_event}=_ref5;myLogger.error(\"activaObservador\");},setElapsed:assign({elapsed:_ref6=>{let{context,_event}=_ref6;return context.video.currentTime;}}),setTime:assign({elapsed:_ref7=>{let{context,_event}=_ref7;return context.video.currentTime;}}),playVideo:_ref8=>{let{context,_event}=_ref8;context.video.play();context.suscrito=null;},logAction:_ref9=>{let{context,_event}=_ref9;myLogger.info(\"Preparando video \");},pauseVideo:_ref10=>{let{context,_event}=_ref10;context.video.pause();myLogger.error(\"Avance:\"+context.avance);context.avance=context.video.currentTime;if(context.observa!=null){context.suscrito=context.observa.subscribe(snapshot=>{//console.log('MiOtroEstado', context);\nmyLogger.log(\"Avance:\"+context.avance+\"\\tElapsed:\"+context.elapsed);});//context.suscrito.start();\n}},progressVideo:_ref11=>{let{context,_event}=_ref11;myLogger.warn(\"Avance:\"+context.avance);},setAvance:assign({avance:_ref12=>{let{context,_event}=_ref12;return Math.floor(context.video.currentTime/context.video.duration*100);}}),setObsAvance:_ref13=>{let{context,_event}=_ref13;myLogger.warn(interval(context.avance,3000));},restartVideo:_ref14=>{let{context,_event}=_ref14;context.video.currentTime=0;context.video.play();context.video.numVideos=context.video.numVideos+1;},setNumVideos:_ref15=>{let{context,_event}=_ref15;context.video.numVideos=context.video.numVideos+1;}},guards:{},delays:{},actors:{iniciadorIntervalo:fromPromise(_ref16=>{let{sendBack,receive}=_ref16;// Start the ticks activity\nconst interval=setInterval(()=>{//console.log(event); // this is the activity instance, not the event\n// I need access to the event that triggered the transition to this activity's state (RUN)\nconsole.log('TICK!');},1000);// Return a function that stops the ticks activity\nreturn()=>clearInterval(interval);}),sendEmail:fromPromise(async _ref17=>{let{input}=_ref17;console.log('Sending email to',input.userId);//const user = await fetchEmail(input.userId);  \nreturn\"exito\";}),intervalLogic:fromObservable(()=>{return interval(1000);})}}).createMachine({context:()=>({video:null,duration:0,elapsed:0,numVideos:0,avance:0,myInterval:5000,intervalId:null,userId:\"amiguel777@gmail.com\",observador:\"vacio\",suscrito:null,observa:null,observando:0,feedback:'Some feedback',creado:Date.now()}),id:\"video\",initial:\"loading\",states:{loading:{invoke:{input:{},src:\"intervalLogic\",onSnapshot:{actions:_ref18=>{let{event}=_ref18;console.log(event.snapshot.context);// 1, 2, 3, ...\n}}},on:{\"control.boton.oprime.ready\":[{target:\"ready\",actions:[{type:\"setVideo\"},{type:\"logAction\"},{type:\"iniciaObservador\"}]}],FAIL:[{target:\"failure\",actions:[]}]}},observando:{initial:\"pausadoObservando\",states:{pausadoObservando:{entry:{type:\"paraObservador\"},exit:{type:\"activaObservador\"},on:{\"control.boton.oprime.activaObservador\":[{target:\"registraObservando\",actions:[]}]}},registraObservando:{entry:{type:\"iniciaObservador\"},exit:{type:\"reIniciaObservador\"},on:{\"control.boton.oprime.desactivaObservador\":[{target:\"pausadoObservando\",actions:[]}]}}}},ready:{initial:\"paused\",states:{paused:{entry:{type:\"setElapsed\"},exit:{type:\"playVideo\"},on:{\"control.boton.oprime.play\":[{target:\"playing\",actions:[]}]}},playing:{entry:{type:\"setElapsed\"},exit:{type:\"pauseVideo\"},on:{COUNT:[{actions:[{type:\"notifyCount\"}]}],TIMING:[{target:\"playing\",actions:[{type:\"setElapsed\"},{type:\"setAvance\"},{type:\"progressVideo\"}]}],\"control.boton.oprime.pause\":[{target:\"paused\",actions:[]}],\"control.boton.oprime.stop\":[{target:\"ended\",actions:[]}]}},ended:{invoke:{input:{},src:\"iniciador\"},on:{setNumVideos:[{actions:[{type:\"inline:video.ready.ended#setNumVideos[-1]#transition[0]\"}]}],\"control.boton.oprime.play\":[{target:\"playing\",actions:[{type:\"restartVideo\"}]}]}}}},failure:{type:\"final\"},invoke:{}}});/**\n * Components\n */export default function App(){const ref=React.useRef(null);const[current,send]=useMachine(videoMachine);const{duration,elapsed,avance}=current.context;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"video\",{ref:ref,onCanPlay:()=>{send({type:\"control.boton.oprime.ready\",video:ref.current});},onTimeUpdate:()=>{send({type:\"TIMING\",video:ref.current});},onEnded:()=>{send({type:\"control.boton.oprime.stop\"});},onError:()=>{send({type:\"FAIL\"});},children:/*#__PURE__*/_jsx(\"source\",{src:\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\",type:\"video/mp4\"})}),[\"paused\",\"playing\",\"ended\"].some(subState=>current.matches({ready:subState}))&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ElapsedBar,{elapsed:elapsed,duration:duration}),/*#__PURE__*/_jsx(Buttons,{current:current,send:send}),/*#__PURE__*/_jsx(Timer,{elapsed:elapsed,duration:duration,avance:avance}),/*#__PURE__*/_jsx(ButtonObservador,{current:current,send:send})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ConsoleLogger,{logger:myLogger})})]});}const Buttons=_ref19=>{let{current,send}=_ref19;if(current.matches({ready:\"playing\"})){return/*#__PURE__*/_jsx(\"button\",{onClick:()=>{send({type:\"control.boton.oprime.pause\"});},children:\"Pause\"});}return/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:'#DDD'},onClick:()=>{send({type:\"control.boton.oprime.play\"});},children:\"Play\"});};const ButtonObservador=_ref20=>{let{current,send}=_ref20;if(current.context.video!==null){return/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:'#CCC'},onClick:()=>{send({type:\"control.boton.oprime.startObservador\"});},children:\"Observar\"});}return/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:'#AAA'},onClick:()=>{send({type:\"control.boton.oprime.stopObservador\"});},children:\"Observando\"});};const ElapsedBar=_ref21=>{let{elapsed,duration}=_ref21;return/*#__PURE__*/_jsx(\"div\",{className:\"elapsed\",children:/*#__PURE__*/_jsx(\"div\",{className:\"elapsed-bar\",style:{width:\"\".concat(percentage(duration,elapsed),\"%\")}})});};const Timer=_ref22=>{let{elapsed,duration}=_ref22;return/*#__PURE__*/_jsxs(\"span\",{className:\"timer\",children:[minutes(elapsed),\":\",seconds(elapsed),\" of \",minutes(duration),\":\",seconds(duration)]});};","map":{"version":3,"names":["React","useMachine","assign","fromPromise","setup","fromObservable","percentage","minutes","seconds","Logger","ConsoleLogger","interval","jsx","_jsx","jsxs","_jsxs","pino","require","logger","transport","target","info","myLogger","videoMachine","types","actions","setVideo","video","_ref","event","duration","_ref2","iniciaObservador","_ref3","context","_event","observa","suscrito","subscribe","snapshot","console","log","paraObservador","_ref4","currentTime","activaObservador","_ref5","error","setElapsed","elapsed","_ref6","setTime","_ref7","playVideo","_ref8","play","logAction","_ref9","pauseVideo","_ref10","pause","avance","progressVideo","_ref11","warn","setAvance","_ref12","Math","floor","setObsAvance","_ref13","restartVideo","_ref14","numVideos","setNumVideos","_ref15","guards","delays","actors","iniciadorIntervalo","_ref16","sendBack","receive","setInterval","clearInterval","sendEmail","_ref17","input","userId","intervalLogic","createMachine","myInterval","intervalId","observador","observando","feedback","creado","Date","now","id","initial","states","loading","invoke","src","onSnapshot","_ref18","on","type","FAIL","pausadoObservando","entry","exit","registraObservando","ready","paused","playing","COUNT","TIMING","ended","failure","App","ref","useRef","current","send","className","children","onCanPlay","onTimeUpdate","onEnded","onError","some","subState","matches","ElapsedBar","Buttons","Timer","ButtonObservador","_ref19","onClick","style","backgroundColor","_ref20","_ref21","width","concat","_ref22"],"sources":["C:/PoC-FE/video-fsm-dos-gitpages/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { useMachine} from \"@xstate/react\";\nimport { assign,  fromPromise,  setup,  fromObservable} from \"xstate\";\nimport { percentage, minutes, seconds } from \"./utils\";\nimport {Logger, ConsoleLogger} from 'react-console-logger';\nimport { interval } from \"rxjs\";\n\n\nimport \"./reset.css\";\nimport \"./App.css\";\n\n\nconst pino = require(\"pino\");\nconst logger = pino({\n  transport: {\n    target: \"pino-pretty\",\n  },\n});\n\nlogger.info('Hello World');\n\nconst myLogger = new Logger();\n  \n\n\n\n\n\n/**\n * Video State Machine\n */\n\n \n\nconst videoMachine = setup({\n  types:{},\n  \n  actions:{\n    \n    setVideo :  \n       assign({\n        video: ({event}) => event.video,\n        duration: ({event}) => event.video.duration\n      }),\n    \n      \n      \n    \n\n    iniciaObservador : ({context, _event}) => {\n      if(context.observa == null)\n      {\n        context.observa = interval(1000);\n        context.suscrito = context.observa.subscribe(snapshot => {\n          console.log('MiNuevoEstado', context);\n        });\n        //context.suscrito.start();\n      }\n      \n    },\n  \n\n    \n    paraObservador : assign({\n      duration: ({context, _event}) => context.video.currentTime,\n    }),\n\n    activaObservador : ({context, _event}) => {\n      myLogger.error(\"activaObservador\");\n    },\n    \n\n    setElapsed : assign({\n      elapsed: ({context, _event}) => context.video.currentTime,\n    }),\n    \n    setTime : assign({\n      elapsed: ({context, _event}) => context.video.currentTime\n    }),\n\n    playVideo : ({context, _event}) => {\n      context.video.play();  \n      context.suscrito = null;\n    },\n\n    logAction : ({context, _event}) => {\n      myLogger.info(\"Preparando video \");\n    },\n    \n    pauseVideo : ({context, _event}) => {\n      context.video.pause();\n      myLogger.error(\"Avance:\"+context.avance);\n      context.avance = context.video.currentTime;\n      \n      if(context.observa != null)\n      {\n          context.suscrito = context.observa.subscribe(snapshot => {\n            //console.log('MiOtroEstado', context);\n            myLogger.log(\"Avance:\"+context.avance+\"\\tElapsed:\"+context.elapsed);\n          });\n          //context.suscrito.start();\n      }\n     \n      \n      \n    },\n\n    progressVideo : ({context, _event}) => {\n      myLogger.warn(\"Avance:\"+context.avance);\n    },\n\n    setAvance : assign({\n      avance: ({context, _event}) => Math.floor((context.video.currentTime/context.video.duration)*100),\n    }),\n\n    setObsAvance : ({context, _event}) => {\n      myLogger.warn(interval(context.avance, 3000));\n    },\n\n    \n    restartVideo : ({context, _event}) => {\n      context.video.currentTime = 0;\n      context.video.play();\n      context.video.numVideos = context.video.numVideos +1;\n    },\n\n    setNumVideos : ({context, _event}) => {\n      context.video.numVideos = context.video.numVideos +1;\n    },\n\n    },\n    guards:{},\n    delays:{},\n    actors:{\n      \n\n      iniciadorIntervalo :  fromPromise(({sendBack, receive}) => {\n        // Start the ticks activity\n        const interval = setInterval(() => {\n        //console.log(event); // this is the activity instance, not the event\n        // I need access to the event that triggered the transition to this activity's state (RUN)\n        console.log('TICK!')\n        }, 1000);\n        // Return a function that stops the ticks activity\n      return () => clearInterval(interval);\n      }),\n\n      sendEmail: fromPromise(async ({ input }) => {\n        console.log('Sending email to', input.userId);        \n        //const user = await fetchEmail(input.userId);  \n        return \"exito\";\n      }),\n      \n      intervalLogic : fromObservable(() => {\n        return interval(1000);        \n      }),\n\n     \n}\n})\n.createMachine( \n  {\n    context: () => ({\n      video: null,\n      duration: 0,\n      elapsed: 0,\n      numVideos: 0,\n      avance: 0,\n      myInterval: 5000,\n      intervalId: null,\n      userId: \"amiguel777@gmail.com\",\n      observador: \"vacio\",\n      suscrito: null,\n      observa: null,\n      observando: 0,\n      feedback: 'Some feedback',\n      creado: Date.now(),\n    }),\n      \n    id: \"video\",\n    initial: \"loading\",\n    states: {\n      loading: {\n        invoke: {\n          input: {},\n          src: \"intervalLogic\",\n          onSnapshot: {\n            actions: ({ event }) => {\n              console.log(event.snapshot.context); // 1, 2, 3, ...\n            }\n          }\n        },\n        on: {\n          \n\n          \n          \"control.boton.oprime.ready\": [\n            {\n              target: \"ready\",\n              actions: [\n                {\n                  type: \"setVideo\",\n                },\n                {\n                  type: \"logAction\",\n                },\n                {\n                  type: \"iniciaObservador\",\n                },\n              ],\n            },\n          ],\n          FAIL: [\n            {\n              target: \"failure\",\n              actions: [],\n            },\n          ],\n        },\n      },\n      observando: {\n        \n        initial: \"pausadoObservando\",\n        states: {\n          pausadoObservando: {\n            entry: {\n              type: \"paraObservador\",\n            },\n            exit: {\n              type: \"activaObservador\",\n            },\n            on: {\n              \"control.boton.oprime.activaObservador\": [\n                {\n                  target: \"registraObservando\",\n                  actions: [],\n                },\n              ],\n            },\n          },\n          registraObservando: {\n            entry: {\n              type: \"iniciaObservador\",\n            },\n            exit: {\n              type: \"reIniciaObservador\",\n            },\n            on: {\n              \"control.boton.oprime.desactivaObservador\": [\n                {\n                  target: \"pausadoObservando\",\n                  actions: [],\n                },\n              ],\n            },\n          },\n          \n        },\n      },\n      ready: {\n        initial: \"paused\",\n        states: {\n          paused: {\n            entry: {\n              type: \"setElapsed\",\n            },\n            exit: {\n              type: \"playVideo\",\n            },\n            on: {\n              \"control.boton.oprime.play\": [\n                {\n                  target: \"playing\",\n                  actions: [],\n                },\n              ],\n            },\n          },\n          playing: {\n            entry: {\n              type: \"setElapsed\",\n            },\n            exit: {\n              type: \"pauseVideo\",\n            },\n            on: {\n              COUNT: [\n                {\n                  actions: [\n                    {\n                      type: \"notifyCount\",\n                    },\n                  ],\n                },\n              ],\n              TIMING: [\n                {\n                  target: \"playing\",\n                  actions: [\n                    {\n                      type: \"setElapsed\",\n                    },\n                    {\n                      type: \"setAvance\",\n                    },\n                    {\n                      type: \"progressVideo\",\n                    },\n                  ],\n                },\n              ],\n              \"control.boton.oprime.pause\": [\n                {\n                  target: \"paused\",\n                  actions: [],\n                },\n              ],\n              \"control.boton.oprime.stop\": [\n                {\n                  target: \"ended\",\n                  actions: [],\n                },\n              ],\n            },\n          },\n          ended: {\n            invoke: {\n              input: {},\n              src: \"iniciador\",\n            },\n            on: {\n              setNumVideos: [\n                {\n                  actions: [\n                    {\n                      type: \"inline:video.ready.ended#setNumVideos[-1]#transition[0]\",\n                    },\n                  ],\n                },\n              ],\n              \"control.boton.oprime.play\": [\n                {\n                  target: \"playing\",\n                  actions: [\n                    {\n                      type: \"restartVideo\",\n                    },\n                  ],\n                },\n              ],\n            },\n          },\n        },\n      },\n      failure: {\n        type: \"final\",\n      },\n      invoke: {},\n    },\n  },\n  \n);\n\n\n\n\n\n\n/**\n * Components\n */\n\nexport default function App() {\n  const ref = React.useRef(null);\n  const [current, send] = useMachine(videoMachine);\n  const { duration, elapsed, avance } = current.context;\n  \n  \n\n  \n  return (\n    <div className=\"container\">\n      <video\n        ref={ref}\n        onCanPlay={() => {\n          send({type:\"control.boton.oprime.ready\",  video: ref.current });\n        }}\n        onTimeUpdate={() => {\n          send({type:\"TIMING\",  video: ref.current});\n        }}\n        onEnded={() => {\n          send({type:\"control.boton.oprime.stop\"});\n        }}\n        onError={() => {\n          send({type:\"FAIL\"});\n        }}\n      >\n        <source src=\"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\" type=\"video/mp4\" />\n      </video>\n\n      {[\"paused\", \"playing\", \"ended\"].some(subState =>\n        current.matches({ ready: subState })\n      ) && (\n        <div>\n          <ElapsedBar elapsed={elapsed} duration={duration} />\n          <Buttons current={current} send={send} />\n          <Timer elapsed={elapsed} duration={duration} avance = {avance} />\n          <ButtonObservador current={current} send={send} />\n      </div>\n\n        \n      )}\n\n      <div>\n        <ConsoleLogger   logger={myLogger} />\n      </div>\n    </div>\n  );\n}\n\nconst Buttons = ({ current, send }) => {\n  if (current.matches({ ready: \"playing\" })) {\n    return (\n      <button\n        onClick={() => {\n          send({type:\"control.boton.oprime.pause\"});\n        }}\n      >\n        Pause\n      </button>\n    );\n  }\n\n  return (\n    <button style={{backgroundColor: '#DDD'}}\n      onClick={() => {\n        send({type:\"control.boton.oprime.play\"});\n      }}\n    >\n      Play\n    </button>\n  );\n};\n\n\nconst ButtonObservador = ({ current, send }) => {\n  \n  \n  if (current.context.video !== null) {\n    return (\n      <button  style={{backgroundColor: '#CCC'}}\n        onClick={() => {\n          send({type:\"control.boton.oprime.startObservador\"});\n        }}\n      >\n        Observar\n      </button>\n    );\n  }\n\n  return (\n    <button style={{backgroundColor: '#AAA'}}\n      onClick={() => {\n        send({type:\"control.boton.oprime.stopObservador\"});\n      }}\n    >\n      Observando\n    </button>\n  );\n};\n\n\nconst ElapsedBar = ({ elapsed, duration }) => (\n  <div className=\"elapsed\">\n    <div\n      className=\"elapsed-bar\"\n      style={{ width: `${percentage(duration, elapsed)}%` }}\n    />\n  </div>\n);\n\nconst Timer = ({ elapsed, duration }) => (\n  <span className=\"timer\">\n    {minutes(elapsed)}:{seconds(elapsed)} of {minutes(duration)}:\n    {seconds(duration)}\n  </span>\n);\n     "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}